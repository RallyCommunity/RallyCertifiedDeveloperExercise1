<!DOCTYPE html>
<html>
<head>
    <title>Excercise1</title>

    <script type="text/javascript" src="/apps/2.0rc1/sdk.js"></script>



    <script type="text/javascript">
        Rally.onReady(function () {
Ext.define('CustomApp', {
    extend: 'Rally.app.App',
    componentCls: 'app',
    items:{
        html:'<a href="https://help.rallydev.com/apps/2.0rc1/doc/#!/api/Rally.data.WsapiDataStore">Hint!<a>'
    },
    fireFromTheStore:function(store,records){
        var blockedRecords = _.filter(records,function(record){
            var blocked = record.get('Blocked')
            console.log(blocked,record);
            return blocked;
        }); 
        Ext.Msg.alert('Status', 'Store Loaded with '+records.length+' records and '+blockedRecords.length + ' blocked records.');
    },

    launch: function() {
        Ext.create('Rally.data.WsapiDataStore', {
                    model: 'User Story',
                    listeners: {
                        load: function(store, records, success) {
                            console.log(records);
                        }
                    },
                    filters: [
                        {
                            property: 'Blocked',
                            value: false
                        }
                    ],
                    autoLoad:true,
                    listeners:{
                        load:this.fireFromTheStore
                    },
                    fetch: true
        });
    }
});
 
            
            Rally.launchApp('CustomApp', {
                name:"Excercise1",
                parentRepos:""
            });

        });
    </script>




    <style type="text/css">
.x-panel-body-default {
     /* Add app styles here !! */
     border-style:none;
}

    </style>

</head>
<body></body>
</html>
